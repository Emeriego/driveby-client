import{e as k,b as P,g as et,c as H,_ as pt,a as Mt,d as Ie,h as yt}from"./@babel-BeZfBE12.js";import{r as t}from"./react-Tg62NQxo.js";import{r as Ge}from"./react-dom-DhGEoIq7.js";import{c as xe}from"./classnames-BdhiT9en.js";import{R as tt}from"./rc-resize-observer-DlP-v-r8.js";import{t as V,H as xt,u as ge,i as Ue}from"./rc-util-BvHxXrUj.js";var rt=t.forwardRef(function(e,l){var r=e.height,u=e.offsetY,h=e.offsetX,o=e.children,c=e.prefixCls,S=e.onInnerResize,m=e.innerProps,p=e.rtl,R=e.extra,n={},s={display:"flex",flexDirection:"column"};return u!==void 0&&(n={height:r,position:"relative",overflow:"hidden"},s=k(k({},s),{},P(P(P(P(P({transform:"translateY(".concat(u,"px)")},p?"marginRight":"marginLeft",-h),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(tt,{onResize:function(g){var d=g.offsetHeight;d&&S&&S()}},t.createElement("div",et({style:s,className:xe(P({},"".concat(c,"-holder-inner"),c)),ref:l},m),o,R)))});rt.displayName="Filler";function Ze(e,l){var r="touches"in e?e.touches[0]:e;return r[l?"pageX":"pageY"]}var qe=t.forwardRef(function(e,l){var r=e.prefixCls,u=e.rtl,h=e.scrollOffset,o=e.scrollRange,c=e.onStartMove,S=e.onStopMove,m=e.onScroll,p=e.horizontal,R=e.spinSize,n=e.containerSize,s=e.style,v=e.thumbStyle,g=t.useState(!1),d=H(g,2),f=d[0],M=d[1],y=t.useState(null),T=H(y,2),L=T[0],W=T[1],X=t.useState(null),x=H(X,2),B=x[0],$=x[1],j=!u,K=t.useRef(),q=t.useRef(),J=t.useState(!1),I=H(J,2),ne=I[0],D=I[1],Q=t.useRef(),N=function(){clearTimeout(Q.current),D(!0),Q.current=setTimeout(function(){D(!1)},3e3)},C=o-n||0,ue=n-R||0,E=t.useMemo(function(){if(h===0||C===0)return 0;var z=h/C;return z*ue},[h,C,ue]),ee=function(w){w.stopPropagation(),w.preventDefault()},ae=t.useRef({top:E,dragging:f,pageY:L,startTop:B});ae.current={top:E,dragging:f,pageY:L,startTop:B};var ce=function(w){M(!0),W(Ze(w,p)),$(ae.current.top),c(),w.stopPropagation(),w.preventDefault()};t.useEffect(function(){var z=function(ve){ve.preventDefault()},w=K.current,A=q.current;return w.addEventListener("touchstart",z),A.addEventListener("touchstart",ce),function(){w.removeEventListener("touchstart",z),A.removeEventListener("touchstart",ce)}},[]);var se=t.useRef();se.current=C;var Y=t.useRef();Y.current=ue,t.useEffect(function(){if(f){var z,w=function(ve){var ie=ae.current,Re=ie.dragging,be=ie.pageY,Ee=ie.startTop;if(V.cancel(z),Re){var te=Ze(ve,p)-be,oe=Ee;!j&&p?oe-=te:oe+=te;var pe=se.current,Me=Y.current,we=Me?oe/Me:0,re=Math.ceil(we*pe);re=Math.max(re,0),re=Math.min(re,pe),z=V(function(){m(re,p)})}},A=function(){M(!1),S()};return window.addEventListener("mousemove",w),window.addEventListener("touchmove",w),window.addEventListener("mouseup",A),window.addEventListener("touchend",A),function(){window.removeEventListener("mousemove",w),window.removeEventListener("touchmove",w),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A),V.cancel(z)}}},[f]),t.useEffect(function(){N()},[h]),t.useImperativeHandle(l,function(){return{delayHidden:N}});var U="".concat(r,"-scrollbar"),O={position:"absolute",visibility:ne?null:"hidden"},F={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return p?(O.height=8,O.left=0,O.right=0,O.bottom=0,F.height="100%",F.width=R,j?F.left=E:F.right=E):(O.width=8,O.top=0,O.bottom=0,j?O.right=0:O.left=0,F.width="100%",F.height=R,F.top=E),t.createElement("div",{ref:K,className:xe(U,P(P(P({},"".concat(U,"-horizontal"),p),"".concat(U,"-vertical"),!p),"".concat(U,"-visible"),ne)),style:k(k({},O),s),onMouseDown:ee,onMouseMove:N},t.createElement("div",{ref:q,className:xe("".concat(U,"-thumb"),P({},"".concat(U,"-thumb-moving"),f)),style:k(k({},F),v),onMouseDown:ce}))});function Et(e){var l=e.children,r=e.setRef,u=t.useCallback(function(h){r(h)},[]);return t.cloneElement(l,{ref:u})}function wt(e,l,r,u,h,o,c){var S=c.getKey;return e.slice(l,r+1).map(function(m,p){var R=l+p,n=o(m,R,{style:{width:u}}),s=S(m);return t.createElement(Et,{key:s,setRef:function(g){return h(m,g)}},n)})}var zt=function(){function e(){Mt(this,e),P(this,"maps",void 0),P(this,"id",0),this.maps=Object.create(null)}return pt(e,[{key:"set",value:function(r,u){this.maps[r]=u,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function _t(e,l,r){var u=t.useState(0),h=H(u,2),o=h[0],c=h[1],S=t.useRef(new Map),m=t.useRef(new zt),p=t.useRef();function R(){V.cancel(p.current)}function n(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var g=function(){S.current.forEach(function(f,M){if(f&&f.offsetParent){var y=xt(f),T=y.offsetHeight;m.current.get(M)!==T&&m.current.set(M,y.offsetHeight)}}),c(function(f){return f+1})};v?g():p.current=V(g)}function s(v,g){var d=e(v),f=S.current.get(d);g?(S.current.set(d,g),n()):S.current.delete(d),!f!=!g&&(g?l==null||l(v):r==null||r(v))}return t.useEffect(function(){return R},[]),[s,n,m.current,o]}var Lt=10;function Ht(e,l,r,u,h,o,c,S){var m=t.useRef(),p=t.useState(null),R=H(p,2),n=R[0],s=R[1];return ge(function(){if(n&&n.times<Lt){if(!e.current){s(function(C){return k({},C)});return}o();var v=n.targetAlign,g=n.originAlign,d=n.index,f=n.offset,M=e.current.clientHeight,y=!1,T=v,L=null;if(M){for(var W=v||g,X=0,x=0,B=0,$=Math.min(l.length-1,d),j=0;j<=$;j+=1){var K=h(l[j]);x=X;var q=r.get(K);B=x+(q===void 0?u:q),X=B}for(var J=W==="top"?f:M-f,I=$;I>=0;I-=1){var ne=h(l[I]),D=r.get(ne);if(D===void 0){y=!0;break}if(J-=D,J<=0)break}switch(W){case"top":L=x-f;break;case"bottom":L=B-M+f;break;default:{var Q=e.current.scrollTop,N=Q+M;x<Q?T="top":B>N&&(T="bottom")}}L!==null&&c(L),L!==n.lastTop&&(y=!0)}y&&s(k(k({},n),{},{times:n.times+1,targetAlign:T,lastTop:L}))}},[n,e.current]),function(v){if(v==null){S();return}if(V.cancel(m.current),typeof v=="number")c(v);else if(v&&Ie(v)==="object"){var g,d=v.align;"index"in v?g=v.index:g=l.findIndex(function(y){return h(y)===v.key});var f=v.offset,M=f===void 0?0:f;s({times:0,index:g,offset:M,originAlign:d})}}}function Tt(e,l,r){var u=e.length,h=l.length,o,c;if(u===0&&h===0)return null;u<h?(o=e,c=l):(o=l,c=e);var S={__EMPTY_ITEM__:!0};function m(g){return g!==void 0?r(g):S}for(var p=null,R=Math.abs(u-h)!==1,n=0;n<c.length;n+=1){var s=m(o[n]),v=m(c[n]);if(s!==v){p=n,R=R||s!==m(c[n+1]);break}}return p===null?null:{index:p,multiple:R}}function Ct(e,l,r){var u=t.useState(e),h=H(u,2),o=h[0],c=h[1],S=t.useState(null),m=H(S,2),p=m[0],R=m[1];return t.useEffect(function(){var n=Tt(o||[],e||[],l);(n==null?void 0:n.index)!==void 0&&(r==null||r(n.index),R(e[n.index])),c(e)},[e]),[p]}var Je=(typeof navigator>"u"?"undefined":Ie(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const nt=function(e,l){var r=t.useRef(!1),u=t.useRef(null);function h(){clearTimeout(u.current),r.current=!0,u.current=setTimeout(function(){r.current=!1},50)}var o=t.useRef({top:e,bottom:l});return o.current.top=e,o.current.bottom=l,function(c){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=c<0&&o.current.top||c>0&&o.current.bottom;return S&&m?(clearTimeout(u.current),r.current=!1):(!m||r.current)&&h(),!r.current&&m}};function Dt(e,l,r,u,h){var o=t.useRef(0),c=t.useRef(null),S=t.useRef(null),m=t.useRef(!1),p=nt(l,r);function R(f,M){V.cancel(c.current),o.current+=M,S.current=M,!p(M)&&(Je||f.preventDefault(),c.current=V(function(){var y=m.current?10:1;h(o.current*y),o.current=0}))}function n(f,M){h(M,!0),Je||f.preventDefault()}var s=t.useRef(null),v=t.useRef(null);function g(f){if(e){V.cancel(v.current),v.current=V(function(){s.current=null},2);var M=f.deltaX,y=f.deltaY,T=f.shiftKey,L=M,W=y;(s.current==="sx"||!s.current&&T&&y&&!M)&&(L=y,W=0,s.current="sx");var X=Math.abs(L),x=Math.abs(W);s.current===null&&(s.current=u&&X>x?"x":"y"),s.current==="y"?R(f,W):n(f,L)}}function d(f){e&&(m.current=f.detail===S.current)}return[g,d]}var Pt=14/15;function It(e,l,r){var u=t.useRef(!1),h=t.useRef(0),o=t.useRef(null),c=t.useRef(null),S,m=function(s){if(u.current){var v=Math.ceil(s.touches[0].pageY),g=h.current-v;h.current=v,r(g)&&s.preventDefault(),clearInterval(c.current),c.current=setInterval(function(){g*=Pt,(!r(g,!0)||Math.abs(g)<=.1)&&clearInterval(c.current)},16)}},p=function(){u.current=!1,S()},R=function(s){S(),s.touches.length===1&&!u.current&&(u.current=!0,h.current=Math.ceil(s.touches[0].pageY),o.current=s.target,o.current.addEventListener("touchmove",m),o.current.addEventListener("touchend",p))};S=function(){o.current&&(o.current.removeEventListener("touchmove",m),o.current.removeEventListener("touchend",p))},ge(function(){return e&&l.current.addEventListener("touchstart",R),function(){var n;(n=l.current)===null||n===void 0||n.removeEventListener("touchstart",R),S(),clearInterval(c.current)}},[e])}var Ot=20;function Qe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/l*e;return isNaN(r)&&(r=0),r=Math.max(r,Ot),Math.floor(r)}function kt(e,l,r,u){var h=t.useMemo(function(){return[new Map,[]]},[e,r.id,u]),o=H(h,2),c=o[0],S=o[1],m=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,s=c.get(R),v=c.get(n);if(s===void 0||v===void 0)for(var g=e.length,d=S.length;d<g;d+=1){var f,M=e[d],y=l(M);c.set(y,d);var T=(f=r.get(y))!==null&&f!==void 0?f:u;if(S[d]=(S[d-1]||0)+T,y===R&&(s=d),y===n&&(v=d),s!==void 0&&v!==void 0)break}return{top:S[s-1]||0,bottom:S[v]}};return m}var $t=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Nt=[],Yt={overflowY:"auto",overflowAnchor:"none"};function Ft(e,l){var r=e.prefixCls,u=r===void 0?"rc-virtual-list":r,h=e.className,o=e.height,c=e.itemHeight,S=e.fullHeight,m=S===void 0?!0:S,p=e.style,R=e.data,n=e.children,s=e.itemKey,v=e.virtual,g=e.direction,d=e.scrollWidth,f=e.component,M=f===void 0?"div":f,y=e.onScroll,T=e.onVirtualScroll,L=e.onVisibleChange,W=e.innerProps,X=e.extraRender,x=e.styles,B=yt(e,$t),$=t.useCallback(function(a){return typeof s=="function"?s(a):a==null?void 0:a[s]},[s]),j=_t($,null,null),K=H(j,4),q=K[0],J=K[1],I=K[2],ne=K[3],D=!!(v!==!1&&o&&c),Q=t.useMemo(function(){return Object.values(I.maps).reduce(function(a,i){return a+i},0)},[I.id,I.maps]),N=D&&R&&(Math.max(c*R.length,Q)>o||!!d),C=g==="rtl",ue=xe(u,P({},"".concat(u,"-rtl"),C),h),E=R||Nt,ee=t.useRef(),ae=t.useRef(),ce=t.useState(0),se=H(ce,2),Y=se[0],U=se[1],O=t.useState(0),F=H(O,2),z=F[0],w=F[1],A=t.useState(!1),fe=H(A,2),ve=fe[0],ie=fe[1],Re=function(){ie(!0)},be=function(){ie(!1)},Ee={getKey:$};function te(a){U(function(i){var b;typeof a=="function"?b=a(i):b=a;var _=ct(b);return ee.current.scrollTop=_,_})}var oe=t.useRef({start:0,end:E.length}),pe=t.useRef(),Me=Ct(E,$),we=H(Me,1),re=we[0];pe.current=re;var ye=t.useMemo(function(){if(!D)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!N){var a;return{scrollHeight:((a=ae.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var i=0,b,_,Z,gt=E.length,me=0;me<gt;me+=1){var Rt=E[me],bt=$(Rt),Ae=I.get(bt),Pe=i+(Ae===void 0?c:Ae);Pe>=Y&&b===void 0&&(b=me,_=i),Pe>Y+o&&Z===void 0&&(Z=me),i=Pe}return b===void 0&&(b=0,_=0,Z=Math.ceil(o/c)),Z===void 0&&(Z=E.length-1),Z=Math.min(Z+1,E.length-1),{scrollHeight:i,start:b,end:Z,offset:_}},[N,D,Y,E,ne,o]),le=ye.scrollHeight,de=ye.start,he=ye.end,Oe=ye.offset;oe.current.start=de,oe.current.end=he;var at=t.useState({width:0,height:o}),ke=H(at,2),G=ke[0],it=ke[1],ot=function(i){it({width:i.width||i.offsetWidth,height:i.height||i.offsetHeight})},$e=t.useRef(),Ne=t.useRef(),lt=t.useMemo(function(){return Qe(G.width,d)},[G.width,d]),ut=t.useMemo(function(){return Qe(G.height,le)},[G.height,le]),ze=le-o,_e=t.useRef(ze);_e.current=ze;function ct(a){var i=a;return Number.isNaN(_e.current)||(i=Math.min(i,_e.current)),i=Math.max(i,0),i}var Ye=Y<=0,Fe=Y>=ze,st=nt(Ye,Fe),Le=function(){return{x:C?-z:z,y:Y}},He=t.useRef(Le()),Te=Ue(function(){if(T){var a=Le();(He.current.x!==a.x||He.current.y!==a.y)&&(T(a),He.current=a)}});function We(a,i){var b=a;i?(Ge.flushSync(function(){w(b)}),Te()):te(b)}function ft(a){var i=a.currentTarget.scrollTop;i!==Y&&te(i),y==null||y(a),Te()}var Ce=function(i){var b=i,_=d?d-G.width:0;return b=Math.max(b,0),b=Math.min(b,_),b},vt=Ue(function(a,i){i?(Ge.flushSync(function(){w(function(b){var _=b+(C?-a:a);return Ce(_)})}),Te()):te(function(b){var _=b+a;return _})}),dt=Dt(D,Ye,Fe,!!d,vt),Xe=H(dt,2),De=Xe[0],Ve=Xe[1];It(D,ee,function(a,i){return st(a,i)?!1:(De({preventDefault:function(){},deltaY:a}),!0)}),ge(function(){function a(b){D&&b.preventDefault()}var i=ee.current;return i.addEventListener("wheel",De),i.addEventListener("DOMMouseScroll",Ve),i.addEventListener("MozMousePixelScroll",a),function(){i.removeEventListener("wheel",De),i.removeEventListener("DOMMouseScroll",Ve),i.removeEventListener("MozMousePixelScroll",a)}},[D]),ge(function(){d&&w(function(a){return Ce(a)})},[G.width,d]);var Be=function(){var i,b;(i=$e.current)===null||i===void 0||i.delayHidden(),(b=Ne.current)===null||b===void 0||b.delayHidden()},je=Ht(ee,E,I,c,$,function(){return J(!0)},te,Be);t.useImperativeHandle(l,function(){return{getScrollInfo:Le,scrollTo:function(i){function b(_){return _&&Ie(_)==="object"&&("left"in _||"top"in _)}b(i)?(i.left!==void 0&&w(Ce(i.left)),je(i.top)):je(i)}}}),ge(function(){if(L){var a=E.slice(de,he+1);L(a,E)}},[de,he,E]);var ht=kt(E,$,I,c),St=X==null?void 0:X({start:de,end:he,virtual:N,offsetX:z,offsetY:Oe,rtl:C,getSize:ht}),mt=wt(E,de,he,d,q,n,Ee),Se=null;o&&(Se=k(P({},m?"height":"maxHeight",o),Yt),D&&(Se.overflowY="hidden",d&&(Se.overflowX="hidden"),ve&&(Se.pointerEvents="none")));var Ke={};return C&&(Ke.dir="rtl"),t.createElement("div",et({style:k(k({},p),{},{position:"relative"}),className:ue},Ke,B),t.createElement(tt,{onResize:ot},t.createElement(M,{className:"".concat(u,"-holder"),style:Se,ref:ee,onScroll:ft,onMouseEnter:Be},t.createElement(rt,{prefixCls:u,height:le,offsetX:z,offsetY:Oe,scrollWidth:d,onInnerResize:J,ref:ae,innerProps:W,rtl:C,extra:St},mt))),N&&le>o&&t.createElement(qe,{ref:$e,prefixCls:u,scrollOffset:Y,scrollRange:le,rtl:C,onScroll:We,onStartMove:Re,onStopMove:be,spinSize:ut,containerSize:G.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),N&&d>G.width&&t.createElement(qe,{ref:Ne,prefixCls:u,scrollOffset:z,scrollRange:d,rtl:C,onScroll:We,onStartMove:Re,onStopMove:be,spinSize:lt,containerSize:G.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Wt=t.forwardRef(Ft);Wt.displayName="List";export{Wt as L};
