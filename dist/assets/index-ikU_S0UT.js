import{j as e,a as oe,r as o}from"./react-Tg62NQxo.js";import{c as cs}from"./react-dom-DhGEoIq7.js";import{L as B,B as ds}from"./react-router-dom-sFUs18Ql.js";import{u as _,a as D,P as hs}from"./react-redux-B0APOfmn.js";import{c as we,a as ms}from"./@reduxjs-DVdFRU_h.js";import{j as G}from"./jwt-decode-VWaDGczM.js";import{A as te}from"./aos-DRNKCcIG.js";import{F as ie,R as le,C as q,D as ze,s as me,I as $e,S as De,a as Pe,b as pe,B as $,c as ye,M as Ee,d as gs,e as ps,f as se}from"./antd-DNDtRRqf.js";import{a as O}from"./axios-Bo0ATomq.js";import{f as ve,p as Ne,i as be,a as _e,b as Je,c as ae,d as us}from"./date-fns-_P5Zls_W.js";import{a as Z,O as xs,d as ke,e as Ue,f as js,g as I}from"./react-router-CY56G_Ca.js";import{U as K,q as fs,l as ys,r as vs,D as Ns,M as bs,s as ws,B as ks,v as Ss}from"./@ant-design-t5wJrzxd.js";import{e as Fe}from"./emailjs-com-DpmFZVTh.js";/* empty css                  */import"./scheduler-CzFDRTuY.js";import"./@remix-run-DyRdwddT.js";import"./use-sync-external-store-CL6GaECe.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./rc-util-BvHxXrUj.js";import"./@babel-BeZfBE12.js";import"./classnames-BdhiT9en.js";import"./rc-resize-observer-DlP-v-r8.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-Kv00C9g1.js";import"./rc-select-Cpcp3cfM.js";import"./rc-overflow-CpbVLoas.js";import"./@rc-component-ByGkrzCA.js";import"./rc-virtual-list-qRYj7xM9.js";import"./@ctrl-DOFZgDuz.js";import"./rc-picker-Nl99QJ7V.js";import"./dayjs-SujKi50c.js";import"./rc-menu-HdIAyf17.js";import"./rc-input-DKgMvpGG.js";import"./rc-textarea-dFx7UWTz.js";import"./rc-dropdown-CD-wkAUV.js";import"./rc-field-form-DdIkAJVz.js";import"./async-validator-DKvM95Vc.js";import"./rc-dialog-aFXKltpg.js";import"./rc-notification-DivCVSub.js";import"./rc-rate-R-nV7s3J.js";import"./rc-tooltip-DKr3quoN.js";import"./rc-pagination-CM5W1tT7.js";import"./@emotion-CW87jbl0.js";import"./stylis-DsJDcYJc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))n(g);new MutationObserver(g=>{for(const h of g)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(g){const h={};return g.integrity&&(h.integrity=g.integrity),g.referrerPolicy&&(h.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?h.credentials="include":g.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(g){if(g.ep)return;g.ep=!0;const h=r(g);fetch(g.href,h)}})();const Ye=we({name:"cars",initialState:{allCars:[],filteredCars:[],selectedCar:{},msg:""},reducers:{fetchall(s,t){const r=t.payload;s.allCars=[],r.map(n=>{s.allCars.push(n)})},fetchFilteredCars(s,t){const r=t.payload;s.filteredCars=[],r.map(n=>{s.filteredCars.push(n)})},fetchSelectedCar(s,t){const r=t.payload;s.selectedCar=r}}}),qe=we({name:"auth",initialState:{loggedInDetail:{},isLoggedIn:!1,loggedInToken:""},reducers:{login(s,t){const r=t.payload;s.isLoggedIn=!0,s.loggedInToken=r.access,s.loggedInDetail={id:G(r.access).id,email:G(r.access).email,username:G(r.access).username,exp:G(r.access).exp,firstname:G(r.access).first_name,lastname:G(r.access).last_name,phone:G(r.access).phone,address:G(r.access).address,date_joined:G(r.access).date_joined}},refresh(s,t){const r=t.payload.access;s.loggedInToken=r},logout(s,t){s.isLoggedIn=!1,s.numberOfLoggedIn-=1,s.loggedInDetail1={},s.loggedInToken=null}}}),Ve=we({name:"bookings",initialState:{carBookings:[],allBookings:[],msg:""},reducers:{fetchCarBookings(s,t){const r=t.payload;s.carBookings=[],r.map(n=>{s.carBookings.push(n)})},fetchAllBookings(s,t){const r=t.payload;s.allBookings=[],r.map(n=>{s.allBookings.push(n)})}}}),We=we({name:"reviews",initialState:{allUserReviews:[],allCarReviews:[],msg:""},reducers:{loadAllUserReviews(s,t){const r=t.payload;s.allUserReviews=[],r.map(n=>{s.allUserReviews.push(n)})},loadAllCarReviews(s,t){const r=t.payload;s.allCarReviews=[],r.map(n=>{s.allCarReviews.push(n)})}}}),Cs=ms({reducer:{cars:Ye.reducer,auth:qe.reducer,bookings:Ve.reducer,reviews:We.reducer}}),Ie=Ye.actions,z=qe.actions,Ge=Ve.actions;We.actions;const Ts=async(s,t)=>{try{const r=await O.post("API_BASE_URL/cars/review/create/",JSON.stringify(s),{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return console.log("result of after posting at utils",r.data),r.data}catch(r){return console.error("Error:",r),null}},Bs=async s=>{try{return(await O.post("http://api.driveby.charwin.tech/reviews/user/create/",s)).data}catch(t){return console.error("Error:",t),null}},S="https://driveby.onrender.com";te.init();const Le=({car:s})=>{const t=["terrible","bad","normal","good","wonderful"];return e.jsx(B,{className:"cad-wrap",to:`/cars/${s.id}`,style:{textDecoration:"none"},children:e.jsxs("div",{className:"card car-card ",style:{width:"16rem"},children:[e.jsx("img",{"data-aos":"slide-up",src:`${S}${s.img}`,className:"card-img-top imgg",alt:"..."}),e.jsxs(ie,{gap:"0",horizontal:!0,children:[e.jsx(le,{tooltips:t,value:s.rating,className:"rate",disabled:!0}),s.rating!==0?e.jsx("span",{className:"rate2",children:`${s.numReviews} reviews`}):e.jsx("small",{className:"rate",children:" No reviews"})]}),e.jsxs("div",{"data-aos":"slide-up",className:"card-body cbody",children:[e.jsx("h5",{className:"card-title",children:`${s.brand}  ${s.model}`}),e.jsxs("div",{className:"card-text det",children:["HP: ",e.jsx("span",{children:s.power})]}),e.jsxs("div",{className:"card-text det",children:["Color: ",e.jsx("span",{children:s.color})]}),e.jsxs("div",{className:"card-text det",children:["Location: ",e.jsx("span",{children:s.city})]}),e.jsxs("div",{className:"card-text det",children:["Rate per hour: ",e.jsx("span",{children:s.price})]})]}),e.jsx("div",{className:"btncard",children:e.jsx(B,{to:`/book/${s.id}`,className:"btn btn-primary custom-btn bg-dark",children:"Book"})})]})})};te.init();const Os=()=>{const s=_(),{RangePicker:t}=ze,r=D(p=>p.cars.allCars),n=D(p=>p.bookings.allBookings),[g,h]=oe.useState(""),[f,b]=oe.useState(""),[j,y]=oe.useState([]),[C,M]=oe.useState([]),[v,c]=oe.useState(!1),m=()=>O.get(`${S}/api/cars/`).then(p=>{s(Ie.fetchall(p.data.reverse()))}).catch(p=>{throw console.error("Error fetching cars:",p),M(P=>[...P,{type:"error",body:"Error fetching cars"}]),p}),T=()=>O.get(`${S}/api/bookings/`).then(p=>{s(Ge.fetchAllBookings(p.data)),console.log("from getBookings",p.data)}).catch(p=>{throw console.error("Error fetching cars:",p),navigate("/"),p}),l=p=>{if(p&&p.length===2){console.log("Selected Time: ",p[0],p[1]);const P=ve(new Date(p[0]),"dd MM yyyy HH:mm"),L=ve(new Date(p[1]),"dd MM yyyy HH:mm");h(P),b(L)}else console.log("No time selected")},w=(p,P)=>{const L=Ne(p,"dd MM yyyy HH:mm",new Date),J=Ne(P,"dd MM yyyy HH:mm",new Date);let V=r;console.log("Filteredlist",V);for(let R=0;R<n.length;R++){const E=new Date(n[R].start_date),A=new Date(n[R].end_date);(be(L,{start:E,end:A})||be(J,{start:E,end:A})||_e(L,E)&&Je(J,A)||ae(L,E)||ae(J,A)||ae(L,A)||ae(J,E))&&(V=V.filter(re=>re.id!=n[R].car.id))}y(V.reverse()),c(!0)};return o.useEffect(()=>{m(),T()},[]),console.log("filteredCars",j,j.length),e.jsxs("div",{className:"container home-wrapper",children:[e.jsxs("div",{"data-aos":"fade-down",justify:"center",className:"searchy",children:[e.jsx(q,{span:16,children:e.jsx("span",{children:e.jsx(t,{className:"date-picker",showTime:{format:"HH:mm"},format:"DD MM YYYY HH:mm",onOk:l})})}),e.jsx(q,{span:4,children:e.jsx("button",{className:" search-btn2",style:{backgroundColor:"transparent",color:"white"},onClick:()=>w(f,g),children:"Filter"})})]}),v?e.jsxs("div",{className:"filtered-info",children:[" ",e.jsxs("h6",{children:["Filter - ",j.length," cars are available for booking for the selected period."]})]}):e.jsxs("div",{children:[" ",e.jsx("h6",{})]}),e.jsx("div",{children:e.jsx("hr",{style:{color:"olivedrab",backgroundColor:"red",marginTop:"10px"}})}),e.jsx("div",{"data-aos":"slide-up",justify:"center",className:"cars-wrapper",children:v?j.map(p=>e.jsx("div",{children:e.jsx(Le,{car:p})},p.id)):r.map(p=>e.jsx("div",{children:e.jsx(Le,{car:p})},p.id))})]})},Is=()=>e.jsx("div",{children:"Contact"});let Xe=async(s,t)=>{let r=await fetch(`${S}/api/login/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:t})}),n=await r.json();return console.log("data: ",n),r.status==200?n:(console.log("Invalid Credentials"),null)},W=async s=>{if(s){const t=G(s.access),r=Date.now()/1e3;if(t.exp<r)try{const n=await fetch(`${S}/api/login/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:s.refresh})});if(n.status===200)return await n.json();throw new Error("Refresh token failed")}catch(n){return console.error("Error refreshing token:",n),null}else return s}return null};const Qe=async(s,t)=>{const r=JSON.parse(localStorage.getItem("authToken"));console.log("before refresh:",r);try{const n=await W(r);console.log("after refresh",n),n!=null&&Object.keys(n).length!==0?(localStorage.setItem("authToken",JSON.stringify(n)),s(t.login(n))):s(t.logout())}catch(n){console.error("Error refreshing tokens:",n),s(t.logout())}};te.init();const Ms=()=>{const[s,t]=o.useState(!1),[r,n]=o.useState(""),[g,h]=o.useState(""),[f,b]=o.useState(""),[j,y]=o.useState(""),[C,M]=o.useState(""),[v,c]=o.useState(""),[m,T]=o.useState(""),[l,w]=o.useState(""),[p,P]=o.useState(""),[L,J]=o.useState(""),[V,R]=o.useState(""),E=_(),A=Z(),re=x=>{const k=x.target.value;n(k),console.log(k)},ce=x=>{const k=x.target.value;b(k),console.log(k)},de=x=>{const k=x.target.value;y(k),console.log(k)},X=x=>{const k=x.target.value;h(k)},Q=x=>{const k=x.target.value;M(k)},he=x=>{const k=x.target.value;c(k)},u=x=>{const k=x.target.value;T(k)},N=x=>{const k=x.target.value;w(k)},U=x=>{const k=x.target.value;P(k)},H=async(x,k,ue,Se,Ce,Te,xe)=>{const je=await fetch(`${S}/api/users/register/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:k,username:ue,phone:Se,address:Ce,firstname:Te,lastname:xe})}),fe=await je.json();if(je.ok)return fe;throw new Error(fe.message)},ee=async()=>{try{const x=await Xe(r,g);localStorage.setItem("authToken",JSON.stringify(x)),E(z.login(x)),A("/home")}catch(x){console.error("Error:",x)}},F=async x=>{if(x.preventDefault(),g!==C){alert("Passwords do not match");return}try{const k=await H(r,g,f,j,v,l,p);t(!0),R("Your account has been created successfully"),setTimeout(()=>{t(!1),R("")},1e4),ee(r,g),setTimeout(()=>{A("/dashboard")})}catch(k){console.error("Error:",k),t(!0),J("Check your details and try again"),setTimeout(()=>{t(!1),J("")},1e4),A("/login")}};return e.jsx("div",{className:"form-container2",children:e.jsxs("div",{className:"card car-card2 ",style:{marginBottom:"0px"},children:[e.jsxs("div",{className:"card-left",children:[e.jsxs("div",{className:"top",children:[e.jsx("h3",{className:"card-title",children:" "}),e.jsx("hr",{})]}),e.jsx("div",{className:"car-img2",children:e.jsx("img",{"data-aos":"slide-up",src:"./assets/logo2.png",className:"card-img-top img",alt:"..."})})]}),e.jsx("div",{"data-aos":"slide-up",className:"card-body card-right ",children:e.jsxs("form",{className:"frm-tag",onSubmit:F,children:[e.jsx("h3",{children:"Signup"}),L&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:L}),V&&e.jsx("div",{className:"alert alert-success",role:"alert",children:V}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx("input",{type:"email",onChange:re,className:"form-control",name:"email",placeholder:"Email","aria-label":"Email"})})}),e.jsxs("div",{className:"row frm",children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:ce,className:"form-control",placeholder:"Username","aria-label":"Username"})}),e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:de,className:"form-control",placeholder:"Phone","aria-label":"phone"})})]}),e.jsxs("div",{className:"row frm",children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"password",onChange:X,className:"form-control",placeholder:"Password","aria-label":"Password"})}),e.jsx("div",{className:"col",children:e.jsx("input",{type:"password",onChange:Q,className:"form-control",placeholder:"Confirm Password","aria-label":"Cpassword"})})]}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:N,className:"form-control",placeholder:"First name","aria-label":"First name"})})})," ",e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:U,className:"form-control",placeholder:"Last Name","aria-label":"Last name"})})}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:he,className:"form-control",placeholder:"Street Address","aria-label":"Street Address"})})}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:u,className:"form-control",placeholder:"City","aria-label":"City"})})}),e.jsx("div",{className:"google-login2",children:e.jsxs("span",{children:["Login with ",e.jsx("a",{href:"",className:"google",children:"Google"})," or ",e.jsx("a",{href:"",className:"facebook",children:"Facebook"})]})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Sign Up"})]})})]})})};te.init();const Rs=()=>{const[s,t]=o.useState(""),[r,n]=o.useState(""),g=_(),h=Z(),[f,b]=me.useMessage(),j=c=>{f.open({type:"success",content:c})},y=c=>{f.open({type:"error",content:c})},C=c=>{const m=c.target.value;t(m),console.log(m)},M=c=>{const m=c.target.value;n(m),console.log(m)},v=async c=>{c.preventDefault();try{const m=await Xe(s,r);localStorage.setItem("authToken",JSON.stringify(m)),console.log("logged in XXXXXX"),g(z.login(m)),j("Login Successful"),setTimeout(()=>{h("/dashboard")},3e3)}catch(m){console.error("Error:",m),y("Login Failed - Invalid Credentials"),h("/login")}};return e.jsx("div",{className:"form-container2",children:e.jsxs("div",{className:"card car-card2 ",children:[e.jsxs("div",{className:"card-left",children:[e.jsxs("div",{className:"top",children:[e.jsx("h3",{className:"card-title",children:" "}),e.jsx("hr",{})]}),e.jsx("div",{className:"car-img2",children:e.jsx("img",{"data-aos":"slide-up",src:"./assets/logo.png",className:"card-img-top img",alt:"..."})})]}),e.jsx("div",{"data-aos":"slide-up",className:"card-body card-right ",children:e.jsxs("form",{className:"frm-tag2","data-aos":"slide-left",onSubmit:v,children:[e.jsx("h3",{children:"Login"}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx($e,{placeholder:"Email",type:"email",name:"email",onChange:C,style:{marginBottom:"5px"},prefix:e.jsx(K,{})})})}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx($e.Password,{placeholder:"input password",name:"password",onChange:M,prefix:e.jsx(K,{}),iconRender:c=>c?e.jsx(fs,{}):e.jsx(ys,{})})})}),e.jsx("div",{className:"google-login2",children:e.jsxs("span",{children:["Login with ",e.jsx("a",{href:"",className:"google",children:"Google"})," or ",e.jsx("a",{href:"",className:"facebook",children:"Facebook"})]})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})]})})},$s=()=>e.jsx("footer",{className:"bg-dark text-white footer",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsx("p",{className:"lead",children:"Footer"})})})})}),Ds="/assets/logo2.png",Ps=()=>{const s=D(j=>j.auth.loggedInToken),t=D(j=>j.auth.loggedInDetail),r=_();oe.useState(!0);const[n,g]=oe.useState(!1),h=async()=>{localStorage.setItem("logout",Date.now().toString()),localStorage.removeItem("authToken"),r(z.logout()),console.log("from logout: ",s)},b={items:[{label:e.jsx("div",{style:{color:"black !important"},children:e.jsx(B,{style:{backgroundColor:"transparent",textDecoration:"none",color:"black"},to:"/dashboard",children:"Dashboard"})}),key:"1",icon:e.jsx(K,{})},{label:e.jsx("div",{style:{color:"black !important"},children:e.jsx(B,{style:{backgroundColor:"transparent",textDecoration:"none",color:"black"},to:"/profile",children:"Profile"})}),key:"2",icon:e.jsx(K,{})},{label:e.jsx("div",{style:{color:"black !important"},children:e.jsx(B,{style:{backgroundColor:"transparent",textDecoration:"none",color:"black"},to:"/home",children:"Book a Car"})}),key:"3",icon:e.jsx(K,{})},{label:e.jsx("div",{style:{color:"black !important"},children:e.jsx(B,{style:{backgroundColor:"transparent",textDecoration:"none",color:"black"},to:"/createcar",children:"Post a Car"})}),key:"4",icon:e.jsx(K,{})},{label:e.jsx("span",{onClick:h,children:"Logout"}),key:"5",icon:e.jsx(K,{})}]};return e.jsx("div",{className:"header-container",children:e.jsxs("div",{className:"header-wrapper",children:[e.jsxs(B,{to:"/home",className:"brand",href:"#",children:[e.jsx("img",{src:Ds,style:{width:"40px",paddingRight:"10px"},alt:""}),e.jsx("span",{className:"brand-name",children:"DriveBy"})]}),e.jsx("div",{className:"menu",children:e.jsxs("ul",{className:"nav justify-content-center",children:[!s&&e.jsx("li",{className:"nav-item",children:e.jsx(B,{to:"/signup",className:"nav-link",children:"Signup"})}),e.jsx("li",{className:"nav-item",children:e.jsx(B,{to:"/guide",className:"nav-link",children:"Guide"})}),e.jsx("li",{className:"nav-item",children:e.jsx(B,{to:"/home",className:"nav-link",href:"#",tabindex:"-1","aria-disabled":"true",children:"Rent a Car"})})]})}),e.jsxs("div",{className:"mobile-menu-wrapper",children:[n?e.jsx(vs,{onClick:()=>g(!n)}):e.jsx(Ns,{onClick:()=>g(!n)}),n&&e.jsxs("ul",{className:" mobile-menu nav ",children:[e.jsx("div",{className:"signature",children:s?e.jsx(De,{wrap:!0,children:e.jsx(Pe.Button,{className:"profile-dropdown ",menu:b,placement:"bottom",icon:e.jsx(K,{}),children:`${t.username}'s Dashboard`})}):e.jsx(B,{to:"/login",children:"Login"})}),!s&&e.jsx("li",{className:"nav-item",children:e.jsx(B,{to:"/signup",className:"nav-link",children:"Signup"})}),e.jsx("li",{className:"nav-item",children:e.jsx(B,{to:"/guide",className:"nav-link",children:"Guide"})}),e.jsx("li",{className:"nav-item",children:e.jsx(B,{to:"/home",className:"nav-link",href:"#",tabindex:"-1","aria-disabled":"true",children:"Rent a Car"})})]})]}),e.jsx("div",{className:"right-menu",children:s?e.jsx(De,{wrap:!0,children:e.jsx(Pe.Button,{className:"profile-dropdown ",menu:b,placement:"bottom",icon:e.jsx(K,{}),children:`${t.username}'s Dashboard`})}):e.jsx(B,{to:"/login",children:"Login"})})]})})},Es=()=>e.jsx("div",{children:e.jsxs("div",{className:"jumbotron lost",children:[e.jsx("h1",{className:"display-4",children:"404"}),e.jsx("p",{className:"lead",children:"You are currently No Where"}),e.jsx("hr",{className:"my-4"}),e.jsx("p",{children:"Don't worry, we got you."}),e.jsx(B,{className:"btn btn-primary btn-lg",to:"/",role:"button",children:"Go back to landing page"})]})}),Ls=()=>e.jsxs("div",{className:"app-wrapper",children:[e.jsx(Ps,{}),e.jsx(xs,{}),e.jsx($s,{})]}),As=()=>{const s=_();o.useState({});const t=Z(),[r,n]=o.useState(!1),[g,h]=o.useState(!0),[f,b]=o.useState(!0),[j,y]=o.useState(!0),[C,M]=o.useState([]),[v,c]=o.useState([]),[m,T]=o.useState([]),[l,w]=o.useState([]),[p,P]=o.useState([]),[L,J]=o.useState([]),[V,R]=o.useState(!1),[E,A]=o.useState(!1),re=["terrible","bad","normal","good","wonderful"],[ce,de]=o.useState(!1),X=D(a=>a.auth.loggedInDetail),Q=D(a=>a.auth.isLoggedIn),[he,u]=o.useState(!0),[N,U]=o.useState(window.innerWidth<768),[H,ee]=me.useMessage(),F=a=>{H.open({type:"success",content:a})},x=a=>{H.open({type:"error",content:a})};o.useEffect(()=>{const a=()=>{U(window.innerWidth<400)};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]);const k=a=>O.get(`${S}/api/bookings/${a}`).then(d=>{J(d.data),console.log("from getBookings",d.data)}).catch(d=>{throw console.error("Error fetching cars:",d),d}),ue=async a=>{try{n(!0);const d=await O.get(`${S}/api/bookings/user/`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log(d.data),n(!1),T(d.data)}catch(d){console.log(d),n(!1)}},Se=async a=>{try{n(!0);const i=(await O.get(`${S}/api/cars/`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data.filter(ge=>ge.user.username===X.username);console.log(i),n(!1),P(i)}catch(d){console.log(d),n(!1)}},Ce=async()=>{if(Q===!1)return t("/login");{const a=JSON.parse(localStorage.getItem("authToken"));try{const d=await W(a);d!=null&&Object.keys(d).length!==0&&(s(z.login(d)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(d))),await os(d.access),await ue(d.access),await Se(d.access),await is(d.access))}catch(d){console.log("error",d)}}},Te=async a=>{await k(a),R(!0)},xe=()=>{R(!1)},je=async a=>{try{return await(await O.get(`${S}/api/bookings/${a}/booking/`)).data}catch(d){console.log(d)}},fe=async a=>{const d=await je(a);w(d),A(!0)},Me=()=>{A(!1)},Ke=async(a,d)=>{try{n(!0);const i=await O.post(`${S}/api/bookings/${d}/confirm/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log(i.data),n(!1),T(i.data)}catch(i){console.log(i),n(!1)}},Ze=async(a,d)=>{try{n(!0);const i=await O.post(`${S}/api/bookings/${d}/complete/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log(i.data),n(!1),T(i.data)}catch(i){console.log(i),n(!1)}},es=async(a,d)=>{console.log("searching for refteshed token:",a);try{n(!0);const i=await O.post(`${S}/api/bookings/${d}/reject/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log(i.data),n(!1),T(i.data)}catch(i){console.log(i),n(!1)}},ss=async(a,d)=>{try{n(!0);const i=await O.post(`${S}/api/bookings/${d}/cancel/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log(i.data),n(!1),T(i.data)}catch(i){console.log(i),n(!1)}},as=async a=>{if(Q===!1)return x("Please login to cancel booking"),t("/login");{const d=JSON.parse(localStorage.getItem("authToken"));if(d===null)return x("Please login to cancel booking"),t("/login");try{const i=await W(d);i!=null&&Object.keys(i).length!==0&&(s(z.login(i)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(i))),await ss(i.access,a),ue(i.access),F("Booking cancelled"))}catch(i){console.log("error",i),i("Error cancelling booking")}}},ts=async a=>{if(Q===!1)return x("Please login to confirm booking"),t("/login");{const d=JSON.parse(localStorage.getItem("authToken"));try{const i=await W(d);i!=null&&Object.keys(i).length!==0&&(s(z.login(i)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(i))),await Ke(i.access,a),F("Booking confirmed"),setTimeout(()=>{R(!1)},2e3))}catch(i){console.log("error",i),i("Error confirming booking")}}},rs=async a=>{if(Q===!1)return x("Please login to complete booking"),t("/login");{const d=JSON.parse(localStorage.getItem("authToken"));try{const i=await W(d);i!=null&&Object.keys(i).length!==0&&(s(z.login(i)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(i))),await Ze(i.access,a),F("Booking completed, please make a review"),setTimeout(()=>{R(!1)},2e3))}catch(i){console.log("error",i),i("Error completing booking")}}},ns=async a=>{if(Q===!1)return x("Please login to confirm booking"),t("/login");{const d=JSON.parse(localStorage.getItem("authToken"));try{const i=await W(d);i!=null&&Object.keys(i).length!==0&&(s(z.login(i)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(i))),await es(i.access,a),F("Booking successfully rejected"),setTimeout(()=>{R(!1)},2e3))}catch(i){console.log("error",i),i("Error confirming booking")}}},os=async a=>{try{n(!0);let i=(await O.get(`${S}/api/messages/`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data.filter(ge=>ge.receiver.username===X.username);n(!1),M(i)}catch(d){console.log(d),n(!1)}},is=async a=>{try{n(!0);let i=(await O.get(`${S}/api/messages/sent/`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data.filter(ge=>ge.sender.username===X.username);n(!1),c(i)}catch(d){console.log(d),n(!1)}},Re=a=>{t(`/review/${a}/create`)},ls=a=>{t(`/review/car/${a}/create`)};return o.useEffect(()=>{const a=setInterval(()=>{Ce()},5e3);return()=>{clearInterval(a)}},[]),e.jsxs("div",{className:"dashboard-container","data-aos":"slide-up",children:[ee,e.jsxs(pe,{children:[e.jsx(q,{className:"d-col-left",span:`${N?"24":"20"}`,children:"Dashboard"}),e.jsx(q,{className:"d-col-right",span:4,children:e.jsx("div",{className:"btns",children:!N&&e.jsx($,{onClick:()=>{t("/profile")},className:"d-btn",type:"primary",size:"small",children:"View Profile"})})})]}),e.jsxs(ye,{orientation:"left",children:[e.jsx("span",{className:"d-toggle",onClick:()=>h(a=>!a),children:g?"Hide Messages":"Show Messages"}),e.jsx(bs,{})]}),e.jsxs(pe,{children:[e.jsx(q,{className:"d-col-left msgs",span:`${N?24:20}`,children:g&&(C.length>0?C.map((a,d)=>e.jsxs("div",{className:"card",style:{width:"80%"},children:[e.jsxs("div",{onClick:()=>de(i=>!i),className:"card-header",children:["From: ",a.sender.username]}),ce&&e.jsxs("div",{className:"card-body",children:[e.jsx("p",{children:a.message}),e.jsx("blockquote",{className:"blockquote mb-0"})]})]},d)):e.jsxs("div",{className:"card",style:{width:"80%"},children:[e.jsx("div",{className:"card-header",children:"Received Messages"}),e.jsx("div",{className:"card-body",children:e.jsx("blockquote",{className:"blockquote mb-0",children:e.jsx("p",{children:"Your inbox is empty"})})})]}))}),!N&&e.jsx(q,{span:4,children:e.jsx($,{onClick:()=>{t("/messages/create")},className:"d-btn",type:"primary",size:"small",children:"Send a Message"})})]}),e.jsxs(ye,{orientation:"left",children:[e.jsx("span",{className:"d-toggle",onClick:()=>u(a=>!a),children:he?"Hide Sent Messages":"Show Sent Messages"}),e.jsx(ws,{})]}),e.jsxs(pe,{children:[e.jsx(q,{className:"d-col-left msgs",span:`${N?24:20}`,children:he&&(v.length>0?v.map((a,d)=>e.jsxs("div",{className:"card",style:{width:"80%"},children:[e.jsxs("div",{onClick:()=>de(i=>!i),className:"card-header",children:["To: ",a.receiver.username]}),ce&&e.jsxs("div",{className:"card-body",children:[e.jsx("p",{children:a.message}),e.jsx("blockquote",{className:"blockquote mb-0"})]})]},d)):e.jsxs("div",{className:"card",style:{width:"80%"},children:[e.jsx("div",{className:"card-header",children:"Sent Messages"}),e.jsx("div",{className:"card-body",children:e.jsx("blockquote",{className:"blockquote mb-0",children:e.jsx("p",{children:"You have not sent any Messages"})})})]}))}),!N&&e.jsx(q,{span:4,children:e.jsx($,{onClick:()=>{t("/messages/create")},className:"d-btn",type:"primary",size:"small",children:"Send a Message"})})]}),e.jsxs(ye,{orientation:"left",children:[e.jsx("span",{className:"d-toggle",onClick:()=>b(a=>!a),children:f?"Hide Bookings":"Show Bookings"}),e.jsx(ks,{})]}),e.jsxs(pe,{children:[e.jsxs(q,{span:`${N?24:20}`,children:[f&&e.jsx("div",{className:"card",style:{width:"80%"},children:e.jsx("ul",{className:"list-group list-group-flush",children:m.length>0?m.map((a,d)=>e.jsxs("li",{className:"list-group-item booking-item",children:[e.jsxs("div",{onClick:()=>fe(a.id),children:[a.car.brand," ",a.car.model," ",e.jsxs("span",{children:["From: ",a.start_date," "]})," ",e.jsxs("span",{children:["To: ",a.end_date]})," ",e.jsxs("span",{children:[a.status," "]})," "]}),(a.status==="Pending"||a.status==="Confirmed")&&e.jsx($,{onClick:()=>{as(a.id)},className:"d-btn-cancel",type:"primary",size:"small",children:"Cancel"}),(a.status==="Completed"||a.status==="Rejected")&&e.jsx($,{onClick:()=>{ls(a.car.id)},className:"d-btn-review",type:"primary",size:"small",children:"Review"})]},d)):e.jsx("li",{className:"list-group-item",children:"You have not made any Booking yet"})})}),E&&e.jsx(Ee,{title:"Bookings",open:E,onOk:Me,footer:[e.jsx($,{type:"primary",onClick:Me,children:"Ok"},"submit")],children:e.jsxs("div",{className:"form-container-modal",children:[e.jsxs("div",{className:"upper-pane",children:[e.jsx("div",{className:"msgs"}),e.jsx("h3",{children:"Booking"}),e.jsx("div",{className:"row frm-rw",children:e.jsxs("div",{className:"selects",children:[e.jsxs("div",{className:"start",children:["from : ",l.start_date]}),e.jsxs("div",{className:"end",children:[" To: ",l.end_date]}),e.jsx($,{onClick:()=>{t(`/review/car/${l.car.id}/create`)},className:"d-btn-review",type:"primary",size:"small",children:"Review"})]})}),e.jsx("div",{className:"row frm-rw",children:e.jsxs("div",{className:"col",children:[e.jsx("hr",{}),e.jsxs("h5",{children:["Brand: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.car.brand]})]}),e.jsxs("h5",{children:["Model: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.car.model]})]}),e.jsxs("h5",{children:["Color: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.car.color]})]}),e.jsxs("h5",{children:["Rate per Hour: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.car.price," "]})]}),e.jsxs("h5",{children:["Posted By: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.car.user.username]})]}),e.jsxs("h5",{children:["Number of Hours: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.total_hours]})]}),e.jsxs("h5",{children:["Total Cost: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),l.total_price]})]})]})})]}),e.jsxs("div",{className:"lower-pane",children:[e.jsx("div",{className:"img-container",children:e.jsx("img",{alt:""})}),e.jsx(ie,{gap:"middle",horizontal:!0,children:e.jsx(le,{tooltips:re,value:l.car.rating,disabled:!0})})]})]})})]}),!N&&e.jsx(q,{span:4,children:e.jsx($,{onClick:()=>{t("/home")},className:"d-btn",type:"primary",size:"small",children:"Book a Car"})})]}),e.jsxs(ye,{orientation:"left",children:[e.jsx("span",{className:"d-toggle",onClick:()=>y(a=>!a),children:j?"Hide Postings":"Show Postings"}),e.jsx(Ss,{})]}),e.jsxs(pe,{children:[e.jsx(q,{span:`${N?24:20}`,children:j&&e.jsx("div",{className:"card",style:{width:"80%"},children:e.jsx("ul",{className:"list-group list-group-flush",children:p.length>0?p.map((a,d)=>e.jsxs("li",{className:"list-group-item",style:{display:"flex",flexDirection:"row",gap:"10px"},children:[e.jsxs(B,{to:`/cars/${a.id}`,children:[a.brand," ",a.model]}),e.jsx($,{onClick:()=>Te(a.id),size:"small",children:"View requests"})]},d)):e.jsx("li",{className:"list-group-item",children:"You have not posted any car yet"})})})}),!N&&e.jsx(q,{span:4,children:e.jsx($,{onClick:()=>{t("/createcar")},className:"d-btn",type:"primary",size:"small",children:"Post a Car"})})]}),e.jsx(Ee,{title:"Bookings",open:V,onOk:xe,footer:[e.jsx($,{type:"primary",loading:r,onClick:xe,children:"Ok"},"submit")],children:e.jsx("ul",{className:"list-group list-group-flush",children:L.length>0?L.map((a,d)=>e.jsxs("li",{className:"list-group-item",style:{display:"flex",flexDirection:"row",gap:"10px"},children:[e.jsxs(B,{to:`/bookings/${a.id}`,children:[a.user.first_name," ",a.start_date," ",a.end_date," ",a.status]}),(a.status==="Pending"||a.status==="pending")&&e.jsxs("div",{children:[e.jsx($,{onClick:()=>ts(a.id),size:"small",children:"Confirm"}),e.jsx($,{onClick:()=>ns(a.id),size:"small",children:"Reject"})]}),a.status==="Confirmed"&&e.jsx("div",{children:e.jsx($,{onClick:()=>rs(a.id),size:"small",children:"Complete"})}),a.status==="Completed"&&a.car.user.id===X.id&&e.jsx("div",{children:e.jsx($,{onClick:()=>Re(a.user.id),size:"small",children:"Review User"})}),a.status==="Canceled"&&a.car.user.id===X.id&&e.jsx("div",{children:e.jsx($,{onClick:()=>Re(a.user.id),size:"small",children:"Review User"})})]},d)):e.jsx("li",{className:"list-group-item",children:"No booking requests for this car"})})})]})};te.init();const Hs=()=>e.jsxs("div",{className:"guide-container","data-aos":"slide-up",style:{width:"80%"},children:[e.jsx("header",{className:"jumbotron text-center",children:e.jsx("h1",{children:"DriveBuy - The Guide"})}),e.jsxs("main",{className:"container",children:[e.jsxs("section",{id:"search",className:"py-4",children:[e.jsx("h2",{children:"1. Searching for Cars"}),e.jsx("p",{children:"To find available cars, you can use the search feature in our app. Specify your desired location, date, and time to view a list of available cars."})]}),e.jsxs("section",{id:"login",className:"py-4",children:[e.jsx("h2",{children:"2. Logging In or Sign up"}),e.jsx("p",{children:"Before you can proceed with booking, you need to log in to your account. If you don't have an account yet, you can sign up for one easily."})]}),e.jsxs("section",{id:"select-car",className:"py-4",children:[e.jsx("h2",{children:"3. Selecting a Car"}),e.jsx("p",{children:"Once logged in, browse through the list of available cars and select the one that best fits your needs. You can view details such as make, model, year, and price per day."})]}),e.jsxs("section",{id:"booking",className:"py-4",children:[e.jsx("h2",{children:"4. Making a Booking"}),e.jsx("p",{children:"After selecting a car, choose your desired rental duration and proceed to book it. Make sure to review the booking details, including pickup and return locations."})]}),e.jsxs("section",{id:"payment",className:"py-4",children:[e.jsx("h2",{children:"6. Payment"}),e.jsx("p",{children:"We offer secure payment options to ensure a smooth transaction."})]}),e.jsxs("section",{id:"acceptance and confirmation of payment",className:"py-4",children:[e.jsx("h2",{children:"5. Acceptance and Confirmation of Payment by car owner"}),e.jsx("p",{children:"Once you've made a booking request, the car owner will review it and either accept or decline it. You'll receive a notification once the owner responds."})]}),e.jsxs("section",{id:"completion",className:"py-4",children:[e.jsx("h2",{children:"8. Completion of Deal"}),e.jsx("p",{children:"On the day of the rental, meet the car owner at the designated location to pick up the car. Conduct a walkthrough inspection to ensure the car's condition matches the listing."})]}),e.jsxs("section",{id:"rating",className:"py-4",children:[e.jsx("h2",{children:"9. Rating and Review"}),e.jsx("p",{children:"After returning the car, you'll have the opportunity to rate and review your experience. This feedback helps maintain the quality of our service and benefits other users."})]})]}),e.jsx("footer",{className:"text-center py-3",children:e.jsx("p",{children:"© 2024 Peer to Peer Car Rental App"})}),e.jsx("script",{src:"https://code.jquery.com/jquery-3.5.1.slim.min.js"}),e.jsx("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"})]}),zs=()=>{const s=D(b=>b.auth.loggedInDetail),{firstname:t,lastname:r,email:n,username:g,address:h}=s,f=[{key:"7",label:"Full Name",span:3,children:t+" "+r},{key:"1",label:"Email",children:n},{key:"2",label:"Username",children:g},{key:"3",label:"Location",span:3,children:h},{key:"4",label:"Date Joined",children:"2018-04-24 18:00:00"},{key:"5",label:"Five Star User XXX",span:2,children:""},{key:"6",label:"Status",span:3,children:e.jsx(ps,{status:"processing",text:"Active"})}];return e.jsx("div",{className:"profile",children:e.jsx(gs,{title:"Profile",layout:"vertical",bordered:!0,items:f})})},_s=()=>{const s=_();Z();const{car_id:t}=ke(),[r,n]=o.useState(null),[g,h]=o.useState([]),f=["terrible","bad","normal","good","wonderful"];o.useState(4),console.log(t);const b=()=>e.jsx("div",{className:"spinner-overlay",children:e.jsx("div",{className:"spinner"})}),j=()=>O.get(`${S}/api/cars/${t}`).then(y=>{s(Ie.fetchSelectedCar(y.data)),n(y.data),console.log(y.data)}).catch(y=>{throw console.error("Error fetching cars:",y),h(C=>[...C,{type:"error",body:"Error fetching cars"}]),Ue("/"),y});return o.useEffect(()=>{j()},[]),r?e.jsx("div",{className:"form-container2",children:e.jsxs("div",{className:"card car-card2 ",children:[e.jsxs("div",{className:"card-left",children:[e.jsxs("div",{className:"top",children:[e.jsxs("h3",{className:"card-title",children:[r.brand," "]}),e.jsx("hr",{})]}),e.jsx("div",{className:"car-img2",children:e.jsx("img",{"data-aos":"slide-up",src:`${S}${r.img}`,className:"card-img-top img",alt:"..."})}),e.jsxs(ie,{gap:"0",horizontal:!0,className:"ratin",children:[e.jsx(le,{tooltips:f,value:r.rating,className:"rate",disabled:!0}),r.rating!==0?e.jsx("span",{className:"rate",children:`${r.numReviews} reviews`}):e.jsx("small",{className:"rate",children:" No reviews"})]})]}),e.jsxs("div",{"data-aos":"slide-up",className:"card-body card-right ",children:[e.jsxs("h5",{children:["Brand: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),r.brand]})]}),e.jsxs("h5",{children:["Model: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),r.model]})]}),e.jsxs("h5",{children:["Color: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),r.color]})]}),e.jsxs("h5",{children:["Horse Power: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),r.power+"HP"]})]}),e.jsxs("h5",{children:["Rate per Hour: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),r.price]})]}),e.jsxs("h5",{children:["Posted By: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),r.user.username]})]}),e.jsx("div",{className:"btns2",children:e.jsx("div",{className:"",children:e.jsx(B,{to:`/book/${r.id}`,className:"btn btn-primary",children:"Book"})})})]})]})}):e.jsx(b,{})};Fe.init("99z3ETftj0yavMx9V");const Js=s=>{Fe.send("service_vndygpg","template_2lvalpa",s).then(function(t){console.log("Email sent successfully",t)}).catch(function(t){console.error("Email could not be sent",t)})},Us=()=>{const s=_(),t=Z();let r=D(u=>u.bookings.carBookings);const n=D(u=>u.auth.isLoggedIn),{car_id:g}=ke(),[h,f]=o.useState(null),[b,j]=o.useState([]),[y,C]=o.useState(null),[M,v]=o.useState(null),[c,m]=o.useState(0),[T,l]=o.useState(!1),[w,p]=o.useState(!1),P=["terrible","bad","normal","good","wonderful"];o.useState(4);const{RangePicker:L}=ze,[J,V]=me.useMessage(),R=u=>{J.open({type:"success",content:u})},E=u=>{J.open({type:"error",content:u})},A=()=>e.jsx("div",{className:"spinner-overlay",children:e.jsx("div",{className:"spinner"})}),re=()=>O.get(`${S}/api/cars/${g}`).then(u=>{s(Ie.fetchSelectedCar(u.data)),f(u.data),console.log("from getCar",u.data)}).catch(u=>{throw console.error("catch in getcar:","Error fetching cars:",u),E("Error fetching car"),setTimeout(()=>{t("/")},2e3),u}),ce=()=>O.get(`${S}/api/bookings/${g}`).then(u=>{s(Ge.fetchCarBookings(u.data)),console.log("from getBookings",u.data)}).catch(u=>{throw console.error("Error fetching cars:",u),E("Error fetching bookings"),setTimeout(()=>{t("/")},2e3),u}),de=u=>{if(u&&u.length===2){console.log("Selected Time: ",u[0],u[1]);const N=ve(new Date(u[0]),"dd MM yyyy HH:mm"),U=ve(new Date(u[1]),"dd MM yyyy HH:mm");C(N),v(U);const H=us(new Date(u[1]),new Date(u[0]));m(H),console.log("Difference in hours:",H)}else console.log("No time selected")},X=(u,N)=>{const U=Ne(u,"dd MM yyyy HH:mm",new Date),H=Ne(N,"dd MM yyyy HH:mm",new Date);for(let ee=0;ee<r.length;ee++){const F=new Date(r[ee].start_date),x=new Date(r[ee].end_date);if(be(U,{start:F,end:x})||be(H,{start:F,end:x})||_e(U,F)&&Je(H,x)||ae(U,F)||ae(H,x)||ae(U,x)||ae(H,F))return E("Car is not available for booking at that time. Please select a different time."),p(!1),!1}return R("Car is available for booking"),p(!0),!0},Q=async u=>{l(!0);try{const N=await O.post(`${S}/api/cars/book/${g}/`,{car_id:g,startDate:y,endDate:M,totalHours:c,totalPrice:c*h.price,status:"Pending"},{headers:{Authorization:`Bearer ${u}`}});return console.log("just posted to db",N.data),l(!1),R("Car booked successfully"),N.data}catch(N){throw console.error("Error booking car:",N),l(!1),E("Could not book car"),N}},he=async()=>{if(n===!1)return t("/login");if(w){const u=JSON.parse(localStorage.getItem("authToken"));try{const N=await W(u);if(N!=null&&Object.keys(N).length!==0){s(z.login(N)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(N)));const U=await Q(N.access);console.log("response from handleCreateBooking",U),R("Car has been booked successfully for the selected time:"+y+" to "+M);const H={to_name:h.user.username,from_name:"DriveBuy",message:`Hello your Car ${h.brand} ${h.model} just got booked. please visit your dashboard to accept the request.`};Js(H),setTimeout(()=>{t("/dashboard")},3e3)}}catch(N){console.log("error",N)}}else alert("Car is not available for the selected time"),j([{type:"error",body:"Car is not available for the selected time"}])};return o.useEffect(()=>{re(),ce()},[]),h?e.jsxs("div",{className:"form-container2",children:[V,e.jsxs("div",{className:"card car-card2 ",children:[e.jsxs("div",{className:"card-left",children:[e.jsxs("div",{className:"top",children:[e.jsxs("h3",{className:"card-title",children:["You are Booking ",h.brand,"  "]}),e.jsx("hr",{})]}),e.jsx("div",{className:"car-img2",children:e.jsx("img",{"data-aos":"slide-up",src:`${S}${h.img}`,className:"card-img-top img",alt:"..."})}),e.jsxs(ie,{gap:"0",horizontal:!0,className:"ratin",children:[e.jsx(le,{tooltips:P,value:h.rating,className:"rate",disabled:!0}),h.rating!==0?e.jsx("span",{className:"rate",children:`${h.numReviews} reviews`}):e.jsx("small",{className:"rate",children:" No reviews"})]})]}),e.jsxs("div",{"data-aos":"slide-up",className:"card-body card-right ",children:[e.jsx("div",{className:"searchy2",children:e.jsx(L,{className:"date-picker",showTime:{format:"HH:mm"},format:"DD MM YYYY HH:mm",onOk:de})}),e.jsxs("h5",{children:["Brand: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),h.brand]})]}),e.jsxs("h5",{children:["Model: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),h.model]})]}),e.jsxs("h5",{children:["Color: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),h.color]})]}),e.jsxs("h5",{children:["Horse Power: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),h.power+"HP"]})]}),e.jsxs("h5",{children:["Rate per Hour: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),h.price]})]}),e.jsxs("h5",{children:["Posted By: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),h.user.username]})]}),e.jsxs("h5",{children:["Number of Hours: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),c]})]}),e.jsxs("h5",{children:["Total Cost: ",e.jsxs("span",{children:[e.jsx("b",{children:"**"}),c*h.price]})]}),e.jsxs("div",{className:"btns2",children:[e.jsx("button",{onClick:()=>X(M,y),className:"btn btn-primary",children:"Check"}),e.jsx("button",{type:"submit",onClick:he,className:`btn btn-primary ${w?"":"disabled"}`,children:"Book"})]})]})]})]}):e.jsx(A,{})},Ae=()=>e.jsx("div",{children:e.jsxs("ul",{className:"dropdown-menu2 dropdown-menu-end dropdown-menu-arrow notifications",children:[e.jsxs("li",{className:"dropdown-header",children:["You have 4 new notifications",e.jsx("a",{href:"#",children:e.jsx("span",{className:"badge rounded-pill bg-primary p-2 ms-2",children:"View all"})})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsxs("li",{className:"notification-item",children:[e.jsx("i",{className:"bi bi-exclamation-circle text-warning"}),e.jsxs("div",{children:[e.jsx("h4",{children:"Lorem Ipsum"}),e.jsx("p",{children:"Quae dolorem earum veritatis oditseno"}),e.jsx("p",{children:"30 min. ago"})]})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsxs("li",{className:"notification-item",children:[e.jsx("i",{className:"bi bi-x-circle text-danger"}),e.jsxs("div",{children:[e.jsx("h4",{children:"Atque rerum nesciunt"}),e.jsx("p",{children:"Quae dolorem earum veritatis oditseno"}),e.jsx("p",{children:"1 hr. ago"})]})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsxs("li",{className:"notification-item",children:[e.jsx("i",{className:"bi bi-check-circle text-success"}),e.jsxs("div",{children:[e.jsx("h4",{children:"Sit rerum fuga"}),e.jsx("p",{children:"Quae dolorem earum veritatis oditseno"}),e.jsx("p",{children:"2 hrs. ago"})]})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsxs("li",{className:"notification-item",children:[e.jsx("i",{className:"bi bi-info-circle text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{children:"Dicta reprehenderit"}),e.jsx("p",{children:"Quae dolorem earum veritatis oditseno"}),e.jsx("p",{children:"4 hrs. ago"})]})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{className:"dropdown-footer",children:e.jsx("a",{href:"#",children:"Show all notifications"})})]})}),Fs=()=>e.jsx("div",{children:"Booking"});te.init();const Ys=()=>{D(c=>c.auth.token),o.useState([]),o.useState(null),o.useState(""),o.useState(!1),o.useState(""),o.useState("");const[s,t]=o.useState({brand:"",model:"",category:"",city:"",condition:"",power:"",price:"",location:"",color:""}),r=Z(),n=_(),g=["Luxury","Trucks","Regular","Heavy Vehicles"],h=["Lagos","Abuja","Portharcourt","Calabar"],f=["Perfect","Brand New","Good","Fair","Bad","Very Bad"],b=["200","300","500","1000"],j=c=>{const{name:m,value:T}=c.target;t({...s,[m]:T})},y=(c,m)=>{t({...s,[m]:c})},C=async c=>{c.preventDefault();const m=JSON.parse(localStorage.getItem("authToken")),T=c.target.fileInput.files[0];try{const l=await W(m);if(l!=null&&Object.keys(l).length!==0){n(z.login(l)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(l)));const w=await M(l.access,s,T);console.log("response",w),r("/home")}else r("/login")}catch(l){console.log("error",l),r("/login")}},M=async(c,m,T)=>{try{const l=new FormData;l.append("brand",m.brand),l.append("model",m.model),l.append("category",m.category),l.append("city",m.city),l.append("condition",m.condition),l.append("power",m.power),l.append("price",m.price),l.append("location",m.location),l.append("color",m.color),T&&l.append("image",T),console.log("before create data",l);const w=await fetch(`${S}/api/cars/create/`,{method:"POST",headers:{Authorization:"Bearer "+String(c)},body:l}),p=await w.json();if(console.log("after create",p),w.ok)return p}catch(l){throw console.log(l),l}},v=()=>{r("/"),console.log("cancel")};return o.useEffect(()=>{document.title="Create Car"},[]),e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"right-p",children:e.jsx("div",{className:"img-container",children:e.jsx("img",{"data-aos":"slide-right",src:"./assets/logo2.png",alt:""})})}),e.jsx("div",{className:"left-p",children:e.jsxs("form",{"data-aos":"slide-left",onSubmit:C,id:"frm",children:[e.jsx("h3",{children:"Post A Car"}),e.jsxs("div",{className:"row frm-rw2",children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:j,name:"brand",className:"form-control",placeholder:"Car Brand","aria-label":"brand"})}),e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",onChange:j,name:"model",className:"form-control",placeholder:"Model and year","aria-label":"model"})})]}),e.jsxs("div",{className:"row frm-rw2",children:[e.jsxs("div",{className:"col",children:[e.jsx(se,{onChange:c=>y(c,"power"),style:{width:"100%"},placeholder:"Horse Power",children:b.map((c,m)=>e.jsx(se.Option,{value:c,children:c},m))}),"               "]}),e.jsxs("div",{className:"col",children:[e.jsx(se,{onChange:c=>y(c,"condition"),style:{width:"100%"},placeholder:"Select Condition",children:f.map((c,m)=>e.jsx(se.Option,{value:c,children:c},m))}),"            "]})]}),e.jsxs("div",{className:"row frm-rw2",children:[e.jsx("div",{className:"col",children:e.jsx(se,{onChange:c=>y(c,"category"),style:{width:"100%"},placeholder:"Select Category",children:g.map((c,m)=>e.jsx(se.Option,{value:c,children:c},m))})}),e.jsx("div",{className:"col",children:e.jsx(se,{onChange:c=>y(c,"city"),style:{width:"100%"},placeholder:"Select City",children:h.map((c,m)=>e.jsx(se.Option,{value:c,children:c},m))})})]}),e.jsxs("div",{className:"row frm-rw2",children:[e.jsx("div",{className:"col",children:e.jsx("input",{onChange:j,name:"location",type:"text",className:"form-control",placeholder:"Street - Car location","aria-label":"Street Address"})}),e.jsx("div",{className:"col",children:e.jsx("input",{onChange:j,name:"color",type:"text",className:"form-control",placeholder:"Color","aria-label":"color"})})]}),e.jsx("div",{className:"row frm-rw2",children:e.jsx("div",{className:"col",children:e.jsx("input",{onChange:j,name:"price",style:{width:"100%"},type:"number",className:"form-control",placeholder:"Price per hour","aria-label":"price"})})}),e.jsx("div",{className:"frm-rw2",children:e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("div",{className:"input-group-prepend"}),e.jsx("input",{type:"file",name:"fileInput",className:"form-control",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1"})]})}),e.jsx("div",{className:"google-login2",children:e.jsxs("span",{children:["See ",e.jsx("a",{href:"",className:"google",children:"Guide"})," to learn how it works"]})}),e.jsxs("div",{className:"row frm-rw2",children:[e.jsx("div",{className:"col",children:e.jsx("button",{form:"frm",type:"submit",style:{width:"100%"},className:"btn btn-primary",children:"Post"})}),e.jsx("div",{className:"col",children:e.jsx("button",{onClick:v,style:{width:"100%"},className:"btn btn-primary",children:"Cancel"})})]})]})})]})},qs=()=>{o.useState(3);const[s,t]=o.useState({}),r=_(),n=Z(),g=D(v=>v.auth.isLoggedIn),[h,f]=me.useMessage(),b=v=>{h.open({type:"success",content:v})},j=v=>{h.open({type:"error",content:v})},y=v=>{t({...s,[v.target.name]:v.target.value})},C=async v=>{try{const c=await O.post(`${S}/api/messages/create/`,JSON.stringify(s),{headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}});console.log("after posting msg",c.data)}catch(c){console.log(c)}},M=async v=>{if(v.preventDefault(),g===!1)j("Please login to send message. Redirecting to login..."),setTimeout(()=>{n("/login")},2e3);else{const c=JSON.parse(localStorage.getItem("authToken"));try{const m=await W(c);m!=null&&Object.keys(m).length!==0&&(r(z.login(m)),JSON.stringify(localStorage.setItem("authToken",JSON.stringify(m))),await C(m.access),b("Message sent successfully. Redirecting to dashboard..."),setTimeout(()=>{n("/dashboard")},2e3))}catch(m){console.log("error",m),j("Error sending message, please try again later."),setTimeout(()=>{n("/messages/create")},2e3)}}};return console.log("data",s),e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"left-pane",children:e.jsx("div",{className:"img-container",children:e.jsx("img",{src:"/assets/logo.png",alt:""})})}),e.jsxs("div",{className:"right-pane",children:[f,e.jsxs("form",{onSubmit:M,children:[e.jsx("h3",{children:"Message"}),e.jsx("div",{className:"frm-rw2",children:e.jsx("input",{onChange:y,type:"text",name:"username",className:"form-control",placeholder:"Recipients username","aria-label":"email"})}),e.jsx("div",{className:"row frm-rw2",children:e.jsx("div",{className:"col",children:e.jsx("textarea",{onChange:y,name:"message",className:"form-control",placeholder:"Your message..","aria-label":"message",rows:"6"})})}),e.jsx("div",{className:"google-login",children:e.jsxs("span",{children:["Any Complaints? Click ",e.jsx("a",{href:"",className:"google",children:"here"})," to contact admin. "]})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})]})]})},Be=["terrible","bad","normal","good","wonderful"],Vs=()=>{const[s,t]=o.useState(3),[r,n]=o.useState(""),g=D(l=>l.auth.isLoggedIn),h=_(),f=Z(),{car_id:b}=ke(),[j,y]=o.useState({}),[C,M]=me.useMessage(),v=l=>{C.open({type:"success",content:l})},c=l=>{C.open({type:"error",content:l})},m=async l=>{try{const p=await(await O.get(`${S}/api/cars/${l}`)).data;y(p)}catch(w){console.log(w)}},T=async l=>{l.preventDefault();try{if(!g)c("Please login to review a car"),setTimeout(()=>f("/login"),2e3);else{const w=JSON.parse(localStorage.getItem("authToken")),p=await W(w);h(z.login(p));const P=await Ts({car:b,review:r,rating:s},p.access);console.log("review feedback:",P)}}catch(w){console.log(w)}console.log("review:",r),console.log("rating:",s),v("Review submitted successfully"),setTimeout(()=>f("/dashboard"),3e3)};return o.useEffect(()=>{m(b)},[]),e.jsx("div",{className:"form-container2",children:e.jsxs("div",{className:"card car-card2 ",children:[e.jsxs("div",{className:"card-left",children:[e.jsxs("div",{className:"top",children:[e.jsxs("h3",{className:"card-title",children:[j.brand," "]}),e.jsx("hr",{})]}),e.jsx("div",{className:"car-img2",children:e.jsx("img",{"data-aos":"slide-up",src:`${S}${j.img}`,className:"card-img-top img",alt:"..."})}),e.jsxs(ie,{gap:"0",horizontal:!0,className:"ratin",children:[e.jsx(le,{tooltips:Be,value:j.rating,className:"rate",disabled:!0}),j.rating!==0?e.jsx("span",{className:"rate",children:`${j.numReviews} reviews`}):e.jsx("small",{className:"rate",children:" No reviews"})]})]}),e.jsx("div",{"data-aos":"slide-up",className:"card-body card-right ",children:e.jsxs("form",{onSubmit:T,children:[e.jsx("h3",{children:"Review"}),e.jsx("div",{className:"row frm-rw2",children:e.jsxs(ie,{gap:"middle",horizontal:!0,children:[e.jsx(le,{tooltips:Be,onChange:t,value:s}),s?e.jsx("span",{children:Be[s-1]}):null]})}),e.jsx("div",{className:"row frm",children:e.jsx("div",{className:"col",children:e.jsx("textarea",{onChange:l=>n(l.target.value),className:"form-control",placeholder:"tell us more..","aria-label":"reviews",rows:"6"})})}),e.jsx("div",{className:"google-login",children:e.jsxs("span",{children:["Any Complaints? Click ",e.jsx("a",{href:"",className:"google",children:"here"})," to contact admin. "]})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Review"})]})})]})})},He=["terrible","bad","normal","good","wonderful"],Ws=()=>{const[s,t]=o.useState(3),[r,n]=o.useState(""),g=D(l=>l.auth.isLoggedIn),h=_(),f=Z(),{user_id:b}=ke(),[j,y]=o.useState({}),[C,M]=me.useMessage(),v=l=>{C.open({type:"success",content:l})},c=l=>{C.open({type:"error",content:l})},m=async l=>{try{const p=await(await O.get(`${S}/api/users/${l}`)).data;y(p)}catch(w){console.log(w)}},T=async l=>{l.preventDefault();try{if(!g)c("Please login to review this user"),setTimeout(()=>f("/login"),2e3);else{const w=JSON.parse(localStorage.getItem("tokens")),p=await W(w);h(authActions.login(p));const P=await Bs({user:b,review:r,rating:s});console.log("response from postReview",P)}}catch(w){console.log(w),c("Something didnt go right."),setTimeout(()=>f("/dashboard"),3e3)}console.log("review:",r),console.log("rating:",s),v("Thanks for the review."),setTimeout(()=>f("/dashboard"),3e3)};return o.useEffect(()=>{m(b)},[]),e.jsxs("div",{className:"form-container",children:[M,e.jsx("div",{className:"left-pane"}),e.jsx("div",{className:"right-pane",children:e.jsxs("form",{onSubmit:T,children:[e.jsx("h3",{children:"Review"}),e.jsx("div",{className:"row frm-rw2",children:e.jsxs(ie,{gap:"middle",horizontal:!0,children:[e.jsx(le,{tooltips:He,onChange:t,value:s}),s?e.jsx("span",{children:He[s-1]}):null]})}),e.jsx("div",{className:"row frm-rw2",children:e.jsx("div",{className:"col",children:e.jsx("textarea",{onChange:n,className:"form-control",placeholder:"tell us more..","aria-label":"reviews",rows:"6"})})}),e.jsx("div",{className:"google-login",children:e.jsxs("span",{children:["Any Complaints? Click ",e.jsx("a",{href:"",className:"google",children:"here"})," to contact admin. "]})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Review"})]})})]})},Gs=()=>e.jsx("div",{children:"Categories"}),Xs="/assets/add1.png",Qs="/assets/sc1.png",Ks="/assets/sc2.png",Zs="/assets/sc3.png",Oe=({src:s,title:t,button:r,navTo:n,text:g})=>e.jsxs("div",{class:"card",style:{width:"18rem;"},children:[e.jsx("img",{src:s,class:"card-img-top",alt:"..."}),e.jsxs("div",{class:"card-body",children:[e.jsx("h5",{class:"card-title",children:t}),e.jsx("p",{class:"card-text",children:g}),e.jsx("a",{href:n,class:"btn btn-primary",children:r})]})]});te.init();const ea=()=>e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"jumbotron jumbotron-fluid top-jumbo",children:e.jsxs("section",{className:"home-container",children:[e.jsx("div",{className:"banner-header",children:e.jsx("img",{"data-aos":"slide-right",src:Xs,width:"300px",alt:"",className:"banner"})}),e.jsxs("div",{"data-aos":"slide-left",className:"left-header",children:[e.jsx("span",{className:"hashtag",children:"A Seamless Representation of Quality Rides"}),e.jsxs("h2",{className:"bold-text",children:["DRIVEBY ",e.jsx("br",{})]}),e.jsx("p",{className:"text",children:"Bringing to you the best of peer to peer car rental services in Nigeria. We offer a wide range of cars to suit your needs. Our cars are well maintained and in top condition. We offer the best prices in the market. We are just a click away."}),e.jsxs(B,{to:"/home",children:[" ",e.jsx("button",{className:"btn h-btn",style:{color:"white"},children:"Check it out"})]})]})]})}),e.jsxs("div",{className:"jumbotron jumbotron-fluid",children:[e.jsx("h1",{className:"display-4 feat-header",children:"Features"}),e.jsxs("div",{"data-aos":"slide-up",className:"container features",children:[e.jsx(Oe,{src:Qs,title:"Simple, Fast, and Secure",text:"Our platform is designed to make your car rental experience as seamless as possible. With just a few clicks, you can browse, book, and unlock.",navTo:"/home",button:"Check it out"}),e.jsx(Oe,{src:Ks,title:"Robust Dashboard",text:"Our user-friendly dashboard allows you to manage your bookings, track your rental history, and communicate with car owners.",navTo:"/login",button:"Check it out"}),e.jsx(Oe,{src:Zs,title:"Rate and Review",text:"Share your feedback with the DRIVEBY community by rating and reviewing your car rental experience. Help others make informed decisions.",navTo:"/login",button:"Check it out"})]})]}),e.jsxs("div",{"data-aos":"slide-left",className:"jumbotron",style:{marginBottom:"100px"},children:[e.jsx("h1",{className:"display-4",children:"What to Know about DRIVEBY!"}),e.jsx("p",{className:"lead",children:"We revolutionize transportation with our peer-to-peer car rental app. Easily rent vehicles from local owners, offering affordable and convenient options for short-term use. Seamlessly browse, book, and unlock cars, promoting sustainability and community sharing."}),e.jsx("hr",{className:"my-4"}),e.jsx("p",{children:"Experience hassle-free travel with our intuitive and eco-conscious platform."}),e.jsx(B,{className:"btn btn-primary btn-lg",to:"/guide",role:"button",children:"How it works"})]})]}),sa=()=>e.jsx("div",{className:"spinner-overlay",children:e.jsx("div",{className:"spinner"})}),Y=({element:s})=>{const t=_();D(f=>f.auth.isLoggedIn);const[r,n]=o.useState(!1),[g,h]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{await Qe(t,z),n(!0)}catch(b){console.error("Error refreshing tokens:",b)}finally{setTimeout(()=>{h(!1)},500)}})()},[t]),g?e.jsx(sa,{}):s},aa=()=>e.jsx("div",{className:"spinner-overlay",children:e.jsx("div",{className:"spinner"})}),ne=({element:s})=>{const t=_(),r=D(b=>b.auth.isLoggedIn),[n,g]=o.useState(!1),[h,f]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{await Qe(t,z),g(!0)}catch(j){console.error("Error refreshing tokens:",j)}finally{setTimeout(()=>{f(!1)},500)}})()},[t]),h?e.jsx(aa,{}):!r||!n?e.jsx(Ue,{to:"/login"}):s};te.init({duration:1e3});function ta(){return _(),D(s=>s.reviews.allCarReviews),o.useEffect(()=>{},[]),e.jsx(ds,{children:e.jsx(js,{children:e.jsxs(I,{path:"/",element:e.jsx(Y,{element:e.jsx(Ls,{})}),children:[e.jsx(I,{index:!0,element:e.jsx(ea,{})}),e.jsx(I,{path:"/Home",element:e.jsx(Y,{element:e.jsx(Os,{})})}),e.jsx(I,{path:"/login",element:e.jsx(Y,{element:e.jsx(Rs,{})})}),e.jsx(I,{path:"/msg",element:e.jsx(Y,{element:e.jsx(Ae,{})})}),e.jsx(I,{path:"/signup",element:e.jsx(Y,{element:e.jsx(Ms,{})})}),e.jsx(I,{path:"/dashboard",element:e.jsx(ne,{element:e.jsx(As,{})})}),e.jsx(I,{path:"/guide",element:e.jsx(Y,{element:e.jsx(Hs,{})})}),e.jsx(I,{path:"/contact",element:e.jsx(Y,{element:e.jsx(Is,{})})}),e.jsx(I,{path:"/profile",element:e.jsx(ne,{element:e.jsx(zs,{})})}),e.jsx(I,{path:"/cars/:car_id",element:e.jsx(Y,{element:e.jsx(_s,{})})}),e.jsx(I,{path:"/book/:car_id",element:e.jsx(Y,{element:e.jsx(Us,{})})}),e.jsx(I,{path:"/cars/:car_id/reviews",element:e.jsx(Y,{element:e.jsx(Ae,{})})}),e.jsx(I,{path:"/cars/:car_id/bookings/:booking_id",element:e.jsx(ne,{element:e.jsx(Fs,{})})}),e.jsx(I,{path:"/createcar",element:e.jsx(ne,{element:e.jsx(Ys,{})})}),e.jsx(I,{path:"/messages/create",element:e.jsx(ne,{element:e.jsx(qs,{})})}),e.jsx(I,{path:"/review/car/:car_id/create",element:e.jsx(ne,{element:e.jsx(Vs,{})})}),e.jsx(I,{path:"/review/user/:user_id/create",element:e.jsx(ne,{element:e.jsx(Ws,{})})}),e.jsx(I,{path:"/categories",element:e.jsx(Y,{element:e.jsx(Gs,{})})}),e.jsx(I,{path:"*",element:e.jsx(Y,{element:e.jsx(Es,{})})})]})})})}cs.createRoot(document.getElementById("root")).render(e.jsx(hs,{store:Cs,children:e.jsx(ta,{})}));
